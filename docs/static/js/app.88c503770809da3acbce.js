webpackJsonp([1],{NHnr:function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var s=i("7+uW"),n=i("NYxO"),a=i("Rf8U"),l=i.n(a),r=i("mtWM"),o=i.n(r),c={init:function(){s.a.use(l.a,o.a),s.a.axios.defaults.baseURL="https://ghibliapi.herokuapp.com/"},get:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";return s.a.axios.get(e+"/"+t).catch(function(e){throw new Error("ApiService "+e)})},all:function(e){return s.a.axios.all(e)}},p=c,u=function(e){return c.get("films",e)},v=function(e){return c.get("people",e)},f=function(e){return c.get("species",e)};s.a.use(n.a);var _=new n.a.Store({state:{films:[],people:[],locations:[],species:[],vehicles:[]},mutations:{removeFilm:function(e){for(;e.films.length>0;)e.films.pop()},addFilm:function(e,t){e.films.push(t)},addPeople:function(e,t){e.people.push(t)}},getters:{films:function(e){return e.films}},actions:{getFilms:function(e){return this.state.films.length?e.getters.films:u().then(function(t){t.data.map(function(t){e.commit("addFilm",t)})})}}}),m={name:"App",beforeRouteEnter:function(e,t,i){_.dispatch("getFilms").then(function(){return i()})},computed:{films:function(){return _.getters.films}}},d={render:function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{attrs:{id:"app"}},[i("div",{staticClass:"container"},[i("br"),e._v(" "),i("br"),e._v(" "),i("router-link",{attrs:{to:"/"}},[e._v("Films ("+e._s(e.films.length)+")")]),e._v(" "),i("br"),e._v(" "),i("br")],1),e._v(" "),i("router-view")],1)},staticRenderFns:[]};var g=i("VU/8")(m,d,!1,function(e){i("fUFu")},null,null).exports,h=i("/ocq"),C={beforeRouteEnter:function(e,t,i){_.dispatch("getFilms").then(function(){return i()})},computed:{films:function(){return _.getters.films}}},b={render:function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"container"},[i("div",{staticClass:"row-filmCard"},e._l(e.films,function(t){return i("div",{key:t.index,staticClass:"col-filmCard"},[i("router-link",{staticClass:"filmCard",attrs:{to:"/film/"+t.id}},[i("div",{staticClass:"filmCard-thumbnail"}),e._v(" "),i("div",{staticClass:"filmCard-meta"},[i("h4",{staticClass:"filmCard-title"},[e._v(e._s(t.title))]),e._v(" "),i("span",{staticClass:"filmCard-producer"},[e._v(e._s(t.producer))])])])],1)}))])},staticRenderFns:[]};var w=i("VU/8")(C,b,!1,function(e){i("StSw")},null,null).exports,F=i("fZjL"),E=i.n(F),x={data:function(){return{film:{},people:[],species:[]}},mounted:function(){this.$nextTick(function(){})},beforeRouteEnter:function(e,t,i){var s=function(e){return e.split("/")[e.split("/").length-1]},n=function(e){return e[0]!==e[0].substring(0,e[0].lastIndexOf("/")+1)};u(e.params.id).then(function(e){var t,i=e.data,a={film:i,people:[],species:[]};return p.all([n(i.species)&&(t=i.species,p.all(t.map(function(e){return f(s(e)).then(function(e){return e.data})}))).then(function(e){return{species:e}}),n(i.people)&&function(e){return p.all(e.map(function(e){return v(s(e)).then(function(e){return e.data})}))}(i.people).then(function(e){return{people:e}})]).then(function(e){return e.map(function(t){var i=E()(t)[0];"species"===i&&t.species.map(function(e){a.species.push(e)}),"people"===i&&t.people.map(function(t){var i=e[0].species.find(function(e){return e.id===s(t.species)});t.species=i.name,a.people.push(t)})}),a})}).then(function(e){i(function(t){t.film=e.film,t.people=e.people,t.species=e.species,console.log("fetching data id:",t.film.id,"complete!")})})}},R={render:function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"container"},[i("div",{staticClass:"page"},[i("div",{staticClass:"page-thumbnail"}),e._v(" "),i("div",{staticClass:"page-content"},[i("ul",{staticClass:"page-info"},[i("li",[i("span",{staticClass:"page-info-label"},[e._v("Director")]),e._v(" "),i("span",{staticClass:"page-info-value"},[e._v(e._s(e.film.director))])]),e._v(" "),i("li",[i("span",{staticClass:"page-info-label"},[e._v("Producers")]),e._v(" "),i("span",{staticClass:"page-info-value"},[e._v(e._s(e.film.producer))])]),e._v(" "),i("li",[i("span",{staticClass:"page-info-label"},[e._v("Release Date")]),e._v(" "),i("span",{staticClass:"page-info-value"},[e._v(e._s(e.film.release_date))])])]),e._v(" "),i("div",{staticClass:"page-rating"},[i("span",{staticClass:"page-rating-label"},[e._v("Rating")]),e._v(" "),i("span",{staticClass:"page-rating-value"},[e._v(e._s(e.film.rt_score))])]),e._v(" "),i("h1",{staticClass:"page-title"},[e._v(e._s(e.film.title))]),e._v(" "),i("h3",[e._v("description")]),e._v(" "),i("p",{staticClass:"page-paragraph"},[e._v(e._s(e.film.description))]),e._v(" "),e.people.length?i("div",[i("h3",[e._v("characters")]),e._v(" "),i("ul",{staticClass:"page-item-columns"},e._l(e.people,function(t,s){return i("li",{key:s},[i("div",{staticClass:"page-item"},[i("div",{staticClass:"page-item-thumbnail"}),e._v(" "),i("h4",{staticClass:"page-item-name"},[e._v(e._s(t.name))]),e._v(" "),i("div",{staticClass:"page-item-info"},[i("span",[e._v("Gender")]),e._v(" "),i("div",[e._v(e._s(t.gender))])]),e._v(" "),i("div",{staticClass:"page-item-info"},[i("span",[e._v("Age")]),e._v(" "),i("div",[e._v(e._s(t.age))])]),e._v(" "),i("div",{staticClass:"page-item-info"},[i("span",[e._v("Species")]),e._v(" "),i("div",[e._v(e._s(t.species))])]),e._v(" "),i("div",{staticClass:"page-item-info"},[i("span",[e._v("Eye Color")]),e._v(" "),i("div",[e._v(e._s(t.eye_color))])]),e._v(" "),i("div",{staticClass:"page-item-info"},[i("span",[e._v("Hair Color")]),e._v(" "),i("div",[e._v(e._s(t.hair_color))])])])])}))]):e._e(),e._v(" "),e.species.length?i("div",[i("h3",[e._v("species")]),e._v(" "),i("ul",{staticClass:"page-item-columns"},e._l(e.species,function(t,s){return i("li",{key:s},[i("div",{staticClass:"page-item"},[i("div",{staticClass:"page-item-thumbnail"}),e._v(" "),i("h4",{staticClass:"page-item-name"},[e._v(e._s(t.name))]),e._v(" "),i("div",{staticClass:"page-item-info"},[i("span",[e._v("Classified")]),e._v(" "),i("div",[e._v(e._s(t.classification))])]),e._v(" "),i("div",{staticClass:"page-item-info page-item-info_colors"},[i("span",[e._v("Eye Colors")]),e._v(" "),i("div",[e._v(e._s(t.eye_colors))])])])])}))]):e._e()])])])},staticRenderFns:[]};var y=i("VU/8")(x,R,!1,function(e){i("uwEm")},null,null).exports;s.a.use(h.a);var k=new h.a({mode:"history",routes:[{path:"/",name:"Home",component:w},{path:"/film/:id",name:"Detail",component:y}]});p.init(),s.a.config.productionTip=!1,new s.a({el:"#app",store:_,router:k,components:{App:g},template:"<App/>"})},StSw:function(e,t){},fUFu:function(e,t){},uwEm:function(e,t){}},["NHnr"]);
//# sourceMappingURL=app.88c503770809da3acbce.js.map